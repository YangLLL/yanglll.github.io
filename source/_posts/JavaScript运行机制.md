---
title: JavaScript运行机制
date: 2021-05-30 17:39:57
tags:
---

JavaScript 是单线程的，一个时间只能做一件事情，有多个任务要排队执行。
JS的任务分为同步任务和异步任务，同步任务在主线程上运行，会形成一个执行栈。

主线程外，事件触发程序还管理着一个任务队列，只要异步任务有了结果，就在任务队列中放入一个事件回调，一旦执行栈中的任务执行完毕，就会读取任务队列，将可执行的异步任务添加到执行栈中执行。

异步任务分为宏任务和微任务，每个宏任务都关联着一个微任务队列，在执行当前任务的过程中，如果有微任务产生，就会将微任务放入微任务队列中，等到当前的宏任务执行完成后，会先去查看微任务队列中是否有待执行的任务，如果有，就按顺序执行，直到微任务都执行完毕，再去任务队列中读取下一个任务，开始下一次的事件循环。
